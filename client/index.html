<!DOCTYPE html>
<html>
<meta name="viewport" content="width=device-width, initial-scale=0.6">
<link rel="stylesheet" href="https://www.w3schools.com/w3css/4/w3.css">
<link rel="stylesheet" href="./styles.css">

<div align="center" style="height: 800px; margin: auto;">

    <a href="https://github.com/ErezHorev/GameOfLifeJS">
        <img style="position: absolute; top: 0; right: 0; border: 0;" src="https://camo.githubusercontent.com/e7bbb0521b397edbd5fe43e7f760759336b5e05f/68747470733a2f2f73332e616d617a6f6e6177732e636f6d2f6769746875622f726962626f6e732f666f726b6d655f72696768745f677265656e5f3030373230302e706e67"
            alt="Fork me on GitHub" data-canonical-src="https://s3.amazonaws.com/github/ribbons/forkme_right_green_007200.png">
    </a>

    <head>
        <h1 class=title>Conway's Game Of Life</h1>
        <title>Conway's Game Of Life</title>
    </head>

    <body>
        <div>
            <div>
                <button type="button" id="startBtn" class="startBtn w3-btn w3-round-xxlarge">Start</button>
                <select id="patternSelector">
                    <!-- All options are generated by the JS code below -->
                </select>
            </div>
            <div>
                <canvas id="gameCanvas" class="gameCanvas"></canvas>
            </div>
        </div>
        <script src="https://code.jquery.com/jquery-1.10.2.js"></script>
        <script type="text/javascript" src="./app.js"></script>
        <script type="text/javascript">
            // populate patternSelector from all supported patterns
            for (var key in allPatterns()) {
                console.log(key)
                var name = allPatterns()[key].name;
                $('#patternSelector').append($('<option>', {
                    value: key,
                    text: name,
                }));
            }

            var gameoflife = new Game(
                setupCanvas(defaults.rows, defaults.lines),
                defaults.rows, defaults.lines);

            // Stop/Start event handlers
            $("#patternSelector").change(function () {
                console.log("Changing pattern");
                var selected = $("#patternSelector").find(":selected");
                pattern = allPatterns()[selected.val()];
                gameoflife.setPattern(pattern.get());
                stop();
            });
            $('#startBtn').click(function () {
                if ($('#startBtn').text() == "Start") {
                    start();
                } else {
                    stop();
                };
            });
            stop = function () {
                if (gameoflife.running) {
                    toggleButton("Start");
                };
                gameoflife.resetGame();
            }
            start = function () {
                if (gameoflife.running) {
                    stop();
                };
                gameoflife.start();
                toggleButton("Stop");
            }
            toggleButton = function (text) {
                // changes button text  //TODO: kind of hacky solution, make it more elegant 
                $('#startBtn').toggleClass('highlight');
                $('#startBtn').text(text);
            }
        </script>
    </body>

</html>